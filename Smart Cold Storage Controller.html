<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Cold Storage Controller | Joseph Thapa Magar</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", sans-serif;
      overflow-x: hidden;
      scroll-behavior: smooth;
      background: #f8f9fa;
    }

    /* Navigation */
    nav {
      background: linear-gradient(135deg, #1c1c1c 0%, #2a2a2a 100%);
      padding: 20px 0;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
    }

    nav a:hover {
      color: #cccccc;
      transform: translateX(-5px);
    }

    /* Hero Section - Compact */
    .project-hero {
      background: linear-gradient(-45deg, #2c3e50, #34495e, #1a252f, #3d5a80);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: white;
      text-align: center;
      padding: 60px 20px 40px;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .project-hero h1 {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .project-hero .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 20px;
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .project-tags span {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 6px 18px;
      border-radius: 20px;
      font-size: 0.85rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Section Titles */
    .content-section {
      margin-bottom: 50px;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      padding-bottom: 15px;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      border-radius: 2px;
    }

    /* Video Grid for Multiple Videos */
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .video-item {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      cursor: pointer;
      transition: all 0.4s ease;
    }

    .video-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    .video-item img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      display: block;
    }

    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .video-item:hover .video-overlay {
      background: rgba(0, 0, 0, 0.5);
    }

    .play-button {
      width: 70px;
      height: 70px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #3d5a80;
      padding-left: 5px;
      transition: all 0.3s ease;
    }

    .video-item:hover .play-button {
      transform: scale(1.2);
      background: white;
    }

    .video-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      color: white;
      padding: 20px 15px 15px;
    }

    .video-caption h4 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    /* Video Modal */
    .video-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 80px 20px 20px;
    }

    .video-modal.active {
      display: flex;
    }

    .video-modal-content {
      position: relative;
      width: 90%;
      max-width: 1200px;
      aspect-ratio: 16/9;
    }

    .video-modal-content iframe {
      width: 100%;
      height: 100%;
      border-radius: 10px;
    }

    .video-modal-close {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 16px;
      color: white;
      cursor: pointer;
      background: #e74c3c;
      padding: 14px 35px;
      border-radius: 30px;
      border: none;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
      z-index: 10001;
      font-family: "Poppins", sans-serif;
    }

    .video-modal-close:hover {
      background: #c0392b;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(231, 76, 60, 0.6);
    }

    .video-modal-close::before {
      content: '‚úï';
      font-size: 20px;
    }

    .video-modal-hint {
      position: fixed;
      top: 20px;
      left: 20px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0, 0, 0, 0.6);
      padding: 12px 20px;
      border-radius: 25px;
      z-index: 10001;
    }

    .video-modal-hint::before {
      content: 'üí°';
      font-size: 18px;
    }

    .video-modal-title {
      position: absolute;
      bottom: -50px;
      left: 0;
      right: 0;
      text-align: center;
      color: white;
      font-size: 1.2rem;
      font-weight: 500;
    }

    /* Main Content Area */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Featured Video - Large */
    .featured-video {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%;
      margin-bottom: 30px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
      background: #000;
    }

    .featured-video iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 20px;
    }

    /* Image Gallery - Masonry Style */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .gallery-item {
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: all 0.4s ease;
      cursor: pointer;
      position: relative;
    }

    .gallery-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    .gallery-item img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      transition: transform 0.4s ease;
      display: block;
    }

    .gallery-item:hover img {
      transform: scale(1.1);
    }

    /* Image Caption */
    .gallery-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      color: white;
      padding: 20px 15px 15px;
      transform: translateY(100%);
      transition: transform 0.4s ease;
      z-index: 2;
    }

    .gallery-item:hover .gallery-caption {
      transform: translateY(0);
    }

    .gallery-caption h4 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    /* Lightbox Modal */
    .lightbox {
      display: none;
      padding: 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    .lightbox.active {
      display: flex;
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 80vh;
      gap: 20px;
      flex-direction: column;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-content img {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 10px;
    }

    .lightbox-caption {
      position: relative;
      bottom: auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 12px 30px;
      border-radius: 25px;
      left: 0;
      right: 0;
      text-align: center;
      color: white;
      font-size: 1.1rem;
      font-weight: 500;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 40px;
      color: white;
      cursor: pointer;
      z-index: 10000;
      background: rgba(0, 0, 0, 0.5);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .lightbox-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(90deg);
    }

    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      font-size: 30px;
      padding: 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: all 0.3s ease;
      z-index: 10000;
    }

    .lightbox-nav:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .lightbox-prev {
      left: 20px;
    }

    .lightbox-next {
      right: 20px;
    }

    /* Info Section - Minimal */
    .info-section {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
    }

    .info-section h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: #1a1a2e;
    }

    .info-section p {
      font-size: 1.05rem;
      line-height: 1.8;
      color: #555;
      margin-bottom: 15px;
    }

    /* Tech Stack - Compact */
    .tech-stack {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 25px 0;
    }

    .tech-badge {
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* Links */
    .links-section {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 25px;
    }

    .project-link {
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      color: white;
      padding: 10px 25px;
      border-radius: 30px;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      font-size: 0.95rem;
    }

    .project-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      color: white;
    }

    /* Back Button */
    .back-section {
      text-align: center;
      margin: 40px 0;
    }

    .back-btn {
      background: linear-gradient(135deg, #444444 0%, #222222 100%);
      color: white;
      border: none;
      padding: 12px 35px;
      border-radius: 50px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .back-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      color: white;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      background: #0a0a0a;
      color: #888;
      font-size: 0.95rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .project-hero h1 {
        font-size: 2rem;
      }

      .project-hero .subtitle {
        font-size: 1rem;
      }

      .gallery {
        grid-template-columns: 1fr;
      }

      .info-section {
        padding: 30px 20px;
      }

      .video-modal-close {
        top: 10px;
        right: 10px;
        font-size: 14px;
        padding: 8px 20px;
      }

      .video-modal-hint {
        display: none;
      }

      .video-modal-content {
        width: 95%;
      }
    }
  </style>
</head>

<body>

  <!-- Navigation -->
  <nav>
    <div class="container">
      <a href="index.html">‚Üê Back to Portfolio</a>
    </div>
  </nav>

  <!-- Hero Section - Compact -->
  <div class="project-hero">
    <h1>Smart Cold-Storage Controller with 3-Phase Power Monitoring (ESP32-Based)</h1>
    <p class="subtitle">Embedded control system designed for vegetable and fruit cold-storage units, combining precise temperature regulation, motor protection, IoT connectivity, and 3-phase power quality analysis.
    </p>
    <div class="project-tags">
      <span>Control System</span>
      <span>C/C++ </span>
      <span>IOT</span>
      <span>Platform IO</span>
      <span>3 Phase Monitoring</span>
      <span>KiCad</span>
      
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    
    <!-- Images Section -->
    <div class="content-section">
      <h2 class="section-title">üì∏ Project Images</h2>
      <div class="gallery">


      <div class="gallery-item" onclick="openLightbox(0)">
        <img src="Smart Cold Storage Controller/PCB Front Layer.JPG" alt="PCB Top Layer">
        <div class="gallery-caption">
          <h4>PCB Top Layer</h4>
        </div>
      </div>
      <div class="gallery-item" onclick="openLightbox(1)">
        <img src="Smart Cold Storage Controller/PCB Back Layer.JPG" alt="PCB Back Layer">
        <div class="gallery-caption">
          <h4>PCB Back Layer</h4>
        </div>
      </div>
      <div class="gallery-item" onclick="openLightbox(2)">
        <img src="Smart Cold Storage Controller/Three Phase Monitoring.JPG" alt="Final Circuit">
        <div class="gallery-caption">
          <h4>Final Circuit</h4>
        </div>
      </div>
      <div class="gallery-item" onclick="openLightbox(3)">
        <img src="Smart Cold Storage Controller/Schematic.JPG" alt="Schematic Diagram">
        <div class="gallery-caption">
          <h4>Schematic Diagram</h4>
        </div>
      </div>






    </div>

    <!-- Videos Section -->
    <div class="content-section">
      <h2 class="section-title">üé• Project Videos</h2>
      
      <!-- Video Grid -->
      <div class="video-grid">
        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/IrNZUSfA7NE', 'Initial Connection and Temperature Set.')">
          <img src="https://img.youtube.com/vi/IrNZUSfA7NE/maxresdefault.jpg" alt="Initial Connection and Temperature Set.">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>Initial Connection and Temperature Set.</h4>
          </div>
        </div>
        
        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/V-8w5T0F3fE', 'Relay Switching Based on Set Temperature and Current Temperature')">
          <img src="https://img.youtube.com/vi/V-8w5T0F3fE/maxresdefault.jpg" alt="Relay Switching Based on Set Temperature and Current Temperature">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>Relay Switching Based on Set Temperature and Current Temperature</h4>
          </div>
        </div>

        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/h30MPp78KX0', 'MQTT Current Temperature Log')">
          <img src="https://img.youtube.com/vi/h30MPp78KX0/hqdefault.jpg" alt="Simple Maze Exploration">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>MQTT Current Temperature Log</h4>
          </div>
        </div>


      </div>
    </div>

    <!-- Project Description Section -->
    <div class="info-section">
      <h2>üìã About This Project</h2>
      <p>
        This project is an embedded control system designed for vegetable and fruit cold-storage units, combining precise temperature regulation, motor protection, IoT connectivity, and 3-phase power quality analysis. Built around an ESP32 microcontroller, the system integrates a DS18B20 temperature sensor, three ZMPT101B voltage sensors, relay/contactor switching, and a local 7-segment display to deliver a complete and reliable solution for cold-storage automation.
      </p>
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Temperature Monitoring & Compressor Control</h3>
      <p>
        The cold-room temperature is measured using a DS18B20 digital sensor, and the system automatically controls the compressor to reach and maintain the user-defined setpoint with intelligent protection mechanisms.
      </p>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Key Features</h4>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Bluetooth-Based Temperature Configuration:</strong> Users can set the desired storage temperature wirelessly using a mobile app, enabling convenient setup and adjustment without physical access to the controller.</li>
        <li><strong>Local 7-Segment Display:</strong> Built-in 7-segment display shows the current real-time temperature directly on the device, allowing technicians and operators to quickly verify system status without needing a phone or dashboard.</li>
        <li><strong>MQTT Data Logging:</strong> Temperature readings are transmitted to an MQTT server for remote monitoring, tracking, and analytics.</li>
      </ul>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Anti-Short Cycling Compressor Protection</h4>
      <p>
        The system utilizes critical timing constraints to prevent rapid cycling and extend compressor life:
      </p>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Minimum OFF Time:</strong> Ensures adequate cooling between compressor cycles to prevent overheating.</li>
        <li><strong>Minimum ON Time:</strong> Prevents premature shutoff that can damage compressor windings.</li>
      </ul>
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Advanced 3-Phase Power Quality Monitoring</h3>
      <p>
        The system uses three ZMPT101B modules for continuous monitoring of each phase (R, Y, B), helping prevent major compressor failures caused by poor supply conditions. This comprehensive power analysis protects expensive refrigeration equipment from grid instabilities common in agricultural and industrial settings.
      </p>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Phase Sequence Detection (Zero-Cross Timing)</h4>
      <p>
        Correct R-Y-B phase order is critical for compressor motor direction and performance. Reverse phase sequence can cause the motor to run backward, resulting in reduced efficiency, overheating, and potential mechanical damage. The ESP32 determines the sequence by:
      </p>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li>Detecting zero-crossing events on all three phases using interrupt-driven edge detection.</li>
        <li>Measuring time differences between phase zero-cross timings.</li>
        <li>Calculating the actual rotation order based on phase lead/lag behavior.</li>
        <li>Immediately disabling the compressor if incorrect sequence is detected, preventing motor damage.</li>
      </ul>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Real-Time RMS Voltage Calculation</h4>
      <p>
        Each phase's waveform is sampled in real time using the ESP32's ADC at high frequency, and RMS voltage is computed using the formula:
      </p>
      <p style="text-align: center; font-size: 1.1rem; margin: 20px 0; background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace;">
        V<sub>RMS</sub> = ‚àö[(1/N) √ó Œ£(V<sub>sample</sub>¬≤)]
      </p>
      <p>
        This mathematical approach provides accurate voltage measurements across varying load conditions, enabling the controller to detect:
      </p>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Phase Imbalance:</strong> Significant differences in RMS voltage between phases that can cause uneven motor heating and reduced efficiency.</li>
        <li><strong>Undervoltage Conditions:</strong> Low supply voltage that forces the motor to draw excessive current, leading to winding damage.</li>
        <li><strong>Overvoltage Conditions:</strong> High voltage that can cause insulation breakdown and premature component failure.</li>
        <li><strong>Voltage Fluctuations:</strong> Rapid changes harmful to motor windings and control electronics.</li>
      </ul>
      <p style="margin-top: 12px;">
        If unsafe voltage conditions appear, the compressor is immediately switched off through the relay-driven contactor, protecting both the motor and refrigeration system.
      </p>
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Hardware Architecture</h3>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Core Components</h4>
      <div style="overflow-x: auto; margin: 20px 0;">
        <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
          <thead>
            <tr style="background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%); color: white;">
              <th style="padding: 15px; text-align: left; font-weight: 600; border: 1px solid #ddd;">Component</th>
              <th style="padding: 15px; text-align: left; font-weight: 600; border: 1px solid #ddd;">Function / Specifications</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">ESP32 Microcontroller</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">Dual-core processor handles ADC sampling, phase-timing calculation, compressor control logic, Bluetooth communication, and MQTT connectivity.</td>
            </tr>
            <tr style="background: #f8f9fa; border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">DS18B20 Temperature Sensor</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">Digital temperature sensor with ¬±0.5¬∞C accuracy, providing reliable cold-storage temperature measurement via 1-Wire protocol.</td>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">ZMPT101B Voltage Sensors (√ó3)</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">Isolated AC voltage sensing modules for all three phases, providing safe measurement up to 250V AC with precision voltage transformer technology.</td>
            </tr>
            <tr style="background: #f8f9fa; border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">7-Segment Display</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">Local display showing real-time temperature, enabling on-site monitoring without external devices.</td>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">Relay Module + Contactor</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">High-power switching system for compressor motor control, handling 3-phase loads safely with electrical isolation.</td>
            </tr>
            <tr style="background: #f8f9fa; border-bottom: 1px solid #eee;">
              <td style="padding: 12px 15px; border: 1px solid #ddd; font-weight: 500;">Custom PCB</td>
              <td style="padding: 12px 15px; border: 1px solid #ddd;">Integrated circuit board includes power regulation, sensor interface circuitry and relay drivers for reliable operation.</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Software Architecture</h3>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Real-Time Control Algorithm</h4>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Multi-Core Processing:</strong> ESP32's dual cores separate time-critical voltage sampling from communication tasks.</li>
        <li><strong>Interrupt-Driven Sensing:</strong> Zero-crossing detection uses hardware interrupts for microsecond-precision phase timing.</li>
      </ul>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Communication Protocols</h4>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Bluetooth Low Energy:</strong> Mobile app interface for configuration, setpoint adjustment, and diagnostics.</li>
        <li><strong>MQTT Protocol:</strong> Publish-subscribe messaging for cloud-based monitoring and data logging.</li>
      </ul>
      
      <h4 style="font-size: 1.2rem; margin-top: 20px; margin-bottom: 12px; color: #2c3e50; font-weight: 600;">Protective Features</h4>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li>Configurable voltage tolerance thresholds for undervoltage and overvoltage detection.</li>
        <li>Phase imbalance calculation with automatic shutdown if imbalance exceeds safe limits.</li>
      </ul>
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Applications</h3>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Agricultural Cold Storage:</strong> Temperature-controlled storage for vegetables, fruits, and agricultural produce with protection against rural power grid instabilities.</li>
        <li><strong>Walk-in Coolers and Freezers:</strong> Commercial refrigeration systems in restaurants, supermarkets, and food processing facilities.</li>
        <li><strong>Dairy and Fisheries Cold Chains:</strong> Maintaining precise temperature control for perishable products with strict quality requirements.</li>
        <li><strong>Industrial Refrigeration:</strong> Large-scale cooling systems in manufacturing plants and warehouses operating on unstable power grids.</li>
        <li><strong>Pharmaceutical Storage:</strong> Temperature-sensitive medication and vaccine storage requiring continuous monitoring and logging.</li>
      </ul>
      
      <h3 style="font-size: 1.5rem; margin-top: 35px; margin-bottom: 20px; color: #1a1a2e; font-weight: 700;">Key Benefits</h3>
      <ul style="line-height: 1.8; color: #555; margin-left: 20px;">
        <li><strong>Equipment Protection:</strong> Advanced power monitoring prevents costly compressor failures from phase sequence errors, voltage imbalances, and power quality issues.</li>
        <li><strong>Energy Efficiency:</strong> Intelligent compressor control with anti-short cycling reduces energy consumption and operating costs.</li>
        <li><strong>Remote Management:</strong> MQTT connectivity enables centralized monitoring of multiple cold-storage units from a single dashboard.</li>
        <li><strong>Reduced Downtime:</strong> Proactive fault detection and automatic shutdown prevent equipment damage and minimize repair time.</li>
        <li><strong>Data-Driven Maintenance:</strong> Continuous logging of temperature and power parameters enables predictive maintenance scheduling.</li>
      </ul>

      <h2 style="margin-top: 40px;">‚öôÔ∏è Technologies & Tools</h2>
      <div class="tech-stack">
        <span class="tech-badge">ESP32</span>
        <span class="tech-badge">C/C++ (Arduino)</span>
        <span class="tech-badge">MQTT Protocol</span>
        <span class="tech-badge">Bluetooth Low Energy</span>
        <span class="tech-badge">PCB Design</span>
        <span class="tech-badge">DS18B20 Sensor</span>
        <span class="tech-badge">ZMPT101B Voltage Sensing</span>
        <span class="tech-badge">Zero-Cross Detection</span>
        <span class="tech-badge">RMS Calculation</span>
        <span class="tech-badge">Phase Sequence Analysis</span>
        <span class="tech-badge">Real-Time Systems</span>
        <span class="tech-badge">IoT Integration</span>

      </div>
    </div>


  </div>

  <!-- Back Button -->
  <div class="back-section">
    <a href="index.html" class="back-btn">‚Üê Back to Portfolio</a>
  </div>

  <!-- Lightbox Modal -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
    <span class="lightbox-close" onclick="closeLightbox(event)">&times;</span>
    <button class="lightbox-nav lightbox-prev" onclick="changeImage(-1, event)">&#10094;</button>
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
      <div class="lightbox-caption" id="lightbox-caption"></div>
    </div>
    <button class="lightbox-nav lightbox-next" onclick="changeImage(1, event)">&#10095;</button>
  </div>

  <!-- Video Modal -->
  <div class="video-modal" id="videoModal" onclick="closeVideoModal(event)">
    <div class="video-modal-content">
      
      <button class="video-modal-close" onclick="closeVideoModal(event)"></button>
      <iframe id="videoIframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      <div class="video-modal-title" id="videoTitle"></div>
    </div>
  </div>

  <footer>
    ¬© 2025 Joseph Thapa Magar. All Rights Reserved.
  </footer>

  <script>
    // Gallery data
    const galleryImages = [
      { src: 'Smart Cold Storage Controller/PCB Front Layer.JPG', caption: 'PCB Top Layer' },
      { src: 'Smart Cold Storage Controller/PCB Back Layer.JPG', caption: 'PCB Back Layer' },
      { src: 'Smart Cold Storage Controller/Three Phase Monitoring.JPG', caption: 'Final Circuit' },
      { src: 'Smart Cold Storage Controller/Schematic.JPG', caption: 'Schematic Diagram' }
    ];

    let currentIndex = 0;

    // Image Lightbox Functions
    function openLightbox(index) {
      currentIndex = index;
      updateLightboxImage();
      document.getElementById('lightbox').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox(event) {
      if (event.target.id === 'lightbox' || event.target.classList.contains('lightbox-close')) {
        document.getElementById('lightbox').classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    }

    function changeImage(direction, event) {
      event.stopPropagation();
      currentIndex += direction;
      
      if (currentIndex < 0) {
        currentIndex = galleryImages.length - 1;
      } else if (currentIndex >= galleryImages.length) {
        currentIndex = 0;
      }
      
      updateLightboxImage();
    }

    function updateLightboxImage() {
      const img = document.getElementById('lightbox-img');
      const caption = document.getElementById('lightbox-caption');
      
      img.src = galleryImages[currentIndex].src;
      caption.textContent = galleryImages[currentIndex].caption;
    }

    // Video Modal Functions
    function openVideoModal(videoUrl, title) {
      const modal = document.getElementById('videoModal');
      const iframe = document.getElementById('videoIframe');
      const titleEl = document.getElementById('videoTitle');
      
      iframe.src = videoUrl + '?autoplay=1';
      titleEl.textContent = title;
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeVideoModal(event) {
      if (event.target.id === 'videoModal' || event.target.classList.contains('video-modal-close')) {
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('videoIframe');
        
        iframe.src = '';
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      const lightbox = document.getElementById('lightbox');
      const videoModal = document.getElementById('videoModal');
      
      if (lightbox.classList.contains('active')) {
        if (e.key === 'Escape') {
          lightbox.classList.remove('active');
          document.body.style.overflow = 'auto';
        } else if (e.key === 'ArrowLeft') {
          changeImage(-1, e);
        } else if (e.key === 'ArrowRight') {
          changeImage(1, e);
        }
      }
      
      if (videoModal.classList.contains('active') && e.key === 'Escape') {
        closeVideoModal(e);
      }
    });
  </script>

</body>
</html>