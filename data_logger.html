<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AVR-based 4G Data Logger | Joseph Thapa Magar</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", sans-serif;
      overflow-x: hidden;
      scroll-behavior: smooth;
      background: #f8f9fa;
    }

    /* Navigation */
    nav {
      background: linear-gradient(135deg, #1c1c1c 0%, #2a2a2a 100%);
      padding: 20px 0;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
    }

    nav a:hover {
      color: #cccccc;
      transform: translateX(-5px);
    }

    /* Hero Section - Compact */
    .project-hero {
      background: linear-gradient(-45deg, #2c3e50, #34495e, #1a252f, #3d5a80);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: white;
      text-align: center;
      padding: 60px 20px 40px;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .project-hero h1 {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .project-hero .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 20px;
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .project-tags span {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 6px 18px;
      border-radius: 20px;
      font-size: 0.85rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Section Titles */
    .content-section {
      margin-bottom: 50px;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      padding-bottom: 15px;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      border-radius: 2px;
    }

    /* Video Grid for Multiple Videos */
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .video-item {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      cursor: pointer;
      transition: all 0.4s ease;
    }

    .video-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    .video-item img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      display: block;
    }

    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .video-item:hover .video-overlay {
      background: rgba(0, 0, 0, 0.5);
    }

    .play-button {
      width: 70px;
      height: 70px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #3d5a80;
      padding-left: 5px;
      transition: all 0.3s ease;
    }

    .video-item:hover .play-button {
      transform: scale(1.2);
      background: white;
    }

    .video-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      color: white;
      padding: 20px 15px 15px;
    }

    .video-caption h4 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    /* Video Modal */
    .video-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 80px 20px 20px;
    }

    .video-modal.active {
      display: flex;
    }

    .video-modal-content {
      position: relative;
      width: 90%;
      max-width: 1200px;
      aspect-ratio: 16/9;
    }

    .video-modal-content iframe {
      width: 100%;
      height: 100%;
      border-radius: 10px;
    }

    .video-modal-close {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 16px;
      color: white;
      cursor: pointer;
      background: #e74c3c;
      padding: 14px 35px;
      border-radius: 30px;
      border: none;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
      z-index: 10001;
      font-family: "Poppins", sans-serif;
    }

    .video-modal-close:hover {
      background: #c0392b;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(231, 76, 60, 0.6);
    }

    .video-modal-close::before {
      content: '‚úï';
      font-size: 20px;
    }

    .video-modal-hint {
      position: fixed;
      top: 20px;
      left: 20px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0, 0, 0, 0.6);
      padding: 12px 20px;
      border-radius: 25px;
      z-index: 10001;
    }

    .video-modal-hint::before {
      content: 'üí°';
      font-size: 18px;
    }

    .video-modal-title {
      position: absolute;
      bottom: -50px;
      left: 0;
      right: 0;
      text-align: center;
      color: white;
      font-size: 1.2rem;
      font-weight: 500;
    }

    /* Main Content Area */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Featured Video - Large */
    .featured-video {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%;
      margin-bottom: 30px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
      background: #000;
    }

    .featured-video iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 20px;
    }

    /* Image Gallery - Masonry Style */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .gallery-item {
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: all 0.4s ease;
      cursor: pointer;
      position: relative;
    }

    .gallery-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    .gallery-item img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      transition: transform 0.4s ease;
      display: block;
    }

    .gallery-item:hover img {
      transform: scale(1.1);
    }

    /* Image Caption */
    .gallery-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      color: white;
      padding: 20px 15px 15px;
      transform: translateY(100%);
      transition: transform 0.4s ease;
      z-index: 2;
    }

    .gallery-item:hover .gallery-caption {
      transform: translateY(0);
    }

    .gallery-caption h4 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
    }

    /* Lightbox Modal */
    .lightbox {
      display: none;
      padding: 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    .lightbox.active {
      display: flex;
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 80vh;
      gap: 20px;
      flex-direction: column;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lightbox-content img {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 10px;
    }

    .lightbox-caption {
      position: relative;
      bottom: auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 12px 30px;
      border-radius: 25px;
      left: 0;
      right: 0;
      text-align: center;
      color: white;
      font-size: 1.1rem;
      font-weight: 500;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 40px;
      color: white;
      cursor: pointer;
      z-index: 10000;
      background: rgba(0, 0, 0, 0.5);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .lightbox-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(90deg);
    }

    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      font-size: 30px;
      padding: 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: all 0.3s ease;
      z-index: 10000;
    }

    .lightbox-nav:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .lightbox-prev {
      left: 20px;
    }

    .lightbox-next {
      right: 20px;
    }

    /* Info Section - Enhanced */
    .info-section {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
    }

    .info-section h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 30px;
      color: #1a1a2e;
      padding-bottom: 15px;
      border-bottom: 3px solid #f0f0f0;
    }

    .info-section h3 {
      font-size: 1.3rem;
      font-weight: 700;
      margin-top: 35px;
      margin-bottom: 15px;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-section h3::before {
      content: '';
      width: 4px;
      height: 24px;
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      border-radius: 2px;
    }

    .info-section h4 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 25px;
      margin-bottom: 12px;
      color: #34495e;
      padding-left: 15px;
      border-left: 3px solid #3d5a80;
    }

    .info-section p {
      font-size: 1.05rem;
      line-height: 1.8;
      color: #555;
      margin-bottom: 15px;
      text-align: justify;
    }

    .info-section ul {
      margin: 15px 0 20px 0;
      padding-left: 25px;
    }

    .info-section li {
      font-size: 1.05rem;
      line-height: 1.8;
      color: #555;
      margin-bottom: 10px;
      position: relative;
    }

    .info-section li::marker {
      color: #3d5a80;
      font-weight: bold;
    }

    .info-section code {
      background: #f4f4f4;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 0.95em;
      color: #e74c3c;
      border: 1px solid #e0e0e0;
    }

    .info-section strong {
      color: #2c3e50;
      font-weight: 600;
    }

    /* Tech Stack - Compact */
    .tech-stack {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 25px 0;
    }

    .tech-badge {
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* Links */
    .links-section {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 25px;
    }

    .project-link {
      background: linear-gradient(135deg, #3d5a80 0%, #2c3e50 100%);
      color: white;
      padding: 10px 25px;
      border-radius: 30px;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 500;
      font-size: 0.95rem;
    }

    .project-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      color: white;
    }

    /* Back Button */
    .back-section {
      text-align: center;
      margin: 40px 0;
    }

    .back-btn {
      background: linear-gradient(135deg, #444444 0%, #222222 100%);
      color: white;
      border: none;
      padding: 12px 35px;
      border-radius: 50px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .back-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      color: white;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      background: #0a0a0a;
      color: #888;
      font-size: 0.95rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .project-hero h1 {
        font-size: 2rem;
      }

      .project-hero .subtitle {
        font-size: 1rem;
      }

      .gallery {
        grid-template-columns: 1fr;
      }

      .info-section {
        padding: 30px 20px;
      }

      .video-modal-close {
        top: 10px;
        right: 10px;
        font-size: 14px;
        padding: 8px 20px;
      }

      .video-modal-hint {
        display: none;
      }

      .video-modal-content {
        width: 95%;
      }
    }
  </style>
</head>

<body>

  <!-- Navigation -->
  <nav>
    <div class="container">
      <a href="index.html">‚Üê Back to Portfolio</a>
    </div>
  </nav>

  <!-- Hero Section - Compact -->
  <div class="project-hero">
    <h1>AVR-based 4G Data Logger</h1>
    <p class="subtitle">A low-power ATmega328P-based data logging system with daily RTC-triggered uploads, EEPROM storage, 
      and SIM7670 HTTP communication. Robust firmware and hardware capable of handling network failures, timed wake-ups, and power-efficient operation.</p>
    <div class="project-tags">
      <span>C/C++ Python</span>
      <span>Embedded C</span>
      <span>Automation</span>
      <span>PCB Design and Fabrication</span>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    
    <!-- Images Section -->
    <div class="content-section">
      <h2 class="section-title">üì∏ Project Images</h2>
      <div class="gallery">
        <div class="gallery-item" onclick="openLightbox(0)">
          <img src="TokenTap/FrontView Labelled.png" alt="PCB Front View">
          <div class="gallery-caption">
            <h4>PCB Front View</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(1)">
          <img src="TokenTap/BackView.jpg" alt="PCB Back View">
          <div class="gallery-caption">
            <h4>PCB Back View</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(2)">
          <img src="TokenTap/Complete Setup Labelled.png" alt="Complete Setup">
          <div class="gallery-caption">
            <h4>Complete Setup</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(3)">
          <img src="TokenTap/PCB Front Back.jpg" alt="Front and Back of Two Layer PCB">
          <div class="gallery-caption">
            <h4>Front and Back of Two Layer PCB</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(4)">
          <img src="TokenTap/Kicad 3d.JPG" alt="PCB designed in KiCad-Front View">
          <div class="gallery-caption">
            <h4>PCB designed in KiCad-Front View</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(5)">
          <img src="TokenTap/2 layer PCB.JPG" alt="KiCad 2 Layer PCB Design">
          <div class="gallery-caption">
            <h4>KiCad Two Layer PCB Design</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(6)">
          <img src="TokenTap/TokenTap.JPG" alt="Token Tap">
          <div class="gallery-caption">
            <h4>Token Tap</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(7)">
          <img src="TokenTap/Tokens.jpg" alt="Inserting Token">
          <div class="gallery-caption">
            <h4>Inserting Token</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(8)">
          <img src="TokenTap/TokenTapMechanism.png" alt="Token Tap Mechanism">
          <div class="gallery-caption">
            <h4>Token Tap Mechanism</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(9)">
          <img src="TokenTap/Python App.JPG" alt="Python Application to Communicate With Data Logger">
          <div class="gallery-caption">
            <h4>Python Application to Communicate With Data Logger</h4>
          </div>
        </div>
        <div class="gallery-item" onclick="openLightbox(10)">
          <img src="TokenTap/Web Server.JPG" alt="Received Data from the Data Logger">
          <div class="gallery-caption">
            <h4>Received Data from the Data Logger</h4>
          </div>
        </div>
      </div>
    </div>

    <!-- Videos Section -->
    <div class="content-section">
      <h2 class="section-title">üé• Project Videos</h2>
      
      <!-- Video Grid -->
      <div class="video-grid">
        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/YtShviF_KgY', 'Project Need/Overview')">
          <img src="TokenTap/Blue Tokens being Inserted.jpg" alt="Project Need/Overview">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>Project Background</h4>
          </div>
        </div>
        
        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/48A65kNzpKU', 'Initial Configuration')">
          <img src="TokenTap/CompleteSetup.jpg" alt="Initial Configuration">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>Initial Configuration of the Data Logger</h4>
          </div>
        </div>
        <div class="video-item" onclick="openVideoModal('https://www.youtube.com/embed/ZTIAV_xlCwI', 'EEPROM-Stored Data Synced to Server')">
          <img src="TokenTap/EEPROM.JPG" alt="Technical Demo">
          <div class="video-overlay">
            <div class="play-button">‚ñ∂</div>
          </div>
          <div class="video-caption">
            <h4>EEPROM-Stored Data Synced to Server</h4>
          </div>
        </div>
      </div>
    </div>

    <!-- Project Description Section -->
    <div class="info-section">
      <h2>üìã About This Project</h2>
      <h3>How The TokenTap Works</h3>
      <p>
      The TokenTap is a prepaid water-dispensing system designed to make water access transparent, affordable, 
      and easy to manage‚Äîespecially in rural or low-income communities. Instead of using money or digital payments 
      at the tap, users operate the system with a simple plastic or stainless-steel token.
      </p>
      <p>
        A token is inserted into the mechanism, and turning the handle downward opens the tap. This empties an internal vessel 
        with a fixed volume (typically 22 liters, or one jerrycan). When the handle is rotated upward again, the chamber refills, 
        ready for the next user. A small gauge on the front shows the available water level, and different tokens can enable tiered 
        or pro-poor water tariffs.
      </p>

      <h3>Where the Data Logger Comes In</h3>
      <p>
        Although the TokenTap works mechanically, tracking usage and revenue is essential for operators who want transparency, 
        accountability, and better system management. This is where the digital data logger is integrated. When the token is inserted, 
        Reed Switch detects the token increasing the count which is stored and sent to the server via sim module.
      </p>
      <p>
        The data logger is a compact, energy-efficient device installed inside the TokenTap. It automatically records events 
        such as:
      </p>
      <ul>
        <li>When the tap was opened</li>
        <li>Total water dispensed over time</li>
        <li>Revenue estimation based on token type</li>
        <li>Battery health and device status</li>
      </ul>

      <h3>üì° Data Logger ‚Äî Key Technical Features</h3>
      <p>
        The embedded data-logging system inside the TokenTap was designed for reliability, ultra-low
        power consumption, and fully autonomous operation in remote locations. Below is an overview of the
        major engineering features built into the firmware and hardware.
      </p>

      <h4>1. Low-Power Data Logging System</h4>
      <p>
        Built on an ATmega328P that normally stays in deep-sleep mode, waking only when triggered by 
        RTC alarms or button interrupts. Additionally the sim module is physically turned off using 
        p channel logic level MOSFET ensuring practically zero power consumption from the power hungry component 
        during ideal state. This ensures extremely long battery life in off-grid setups.
      </p>

      <h4>2. Real-Time Clock (DS3231) with Dual Alarms</h4>
      <ul>
        <li>Alarm 1 triggers daily data upload</li>
        <li>Alarm 2 handles the midnight rollover</li>
        <li>RTC interrupt pin wakes the MCU instantly</li>
        <li>All alarm flags managed safely to avoid missed events</li>
      </ul>

      <h4>3. EEPROM-Backed Data Storage (Fail-Safe Logging)</h4>
      <ul>
        <li>External 4 KB EEPROM stores daily <code>struct</code>-based logs</li>
        <li>Page-safe writing to prevent corruption</li>
        <li>Automatic rollover and pointer tracking</li>
        <li>Can batch-upload multiple days when the network is available</li>
      </ul>

      <h4>4. SIM7600/SIM7670 HTTP Upload System</h4>
      <p>
        Each day, the device powers on the SIM module using a MOSFET, packages the data into a compact
        string, and uploads it via HTTP POST. If upload fails, data is retained in EEPROM for retry later.
      </p>

      <h4>5. Robust Event Counting (Debounced + Interrupt Based)</h4>
      <ul>
        <li>Uses hardware interrupts for button/token detection</li>
        <li>Software debounce ensures accurate counting</li>
        <li>Timestamp + count stored in a day-log structure</li>
        <li>Useful for footfall, usage monitoring, and mechanical token taps</li>
      </ul>

      <h4>6. Complete Power Management</h4>
      <ul>
        <li>ATmega in full power-down sleep mode</li>
        <li>ADC disabled during sleep</li>
        <li>Wakes only from RTC or button interrupt</li>
      </ul>

      <h4>7. Automatic Daily Rollover Logic</h4>
      <ul>
        <li>At midnight, Today ‚Üí Yesterday</li>
        <li>Resets counters, updates timestamps</li>
        <li>Handles leap years and month-end transitions</li>
      </ul>

      <h4>8. Modular Firmware Architecture</h4>
      <ul>
        <li><strong>DS3231.cpp</strong> ‚Äî RTC, alarms, wake interrupts</li>
        <li><strong>main.cpp</strong> ‚Äî core logic, EEPROM handler, sleep system</li>
        <li><strong>sim7670.cpp</strong> ‚Äî HTTP communication layer</li>
      </ul>
      <p>
        This modular architecture makes the system easy to maintain, extend, and audit.
      </p>

      <h2 style="margin-top: 30px;">‚öôÔ∏è Technologies Used</h2>
      <div class="tech-stack">
        <span class="tech-badge">Embedded C</span>
        <span class="tech-badge">C/C++</span>
        <span class="tech-badge">Platform IO</span>
        <span class="tech-badge">Automation</span>
        <span class="tech-badge">PCB Fabrication</span>
        <span class="tech-badge">Power Management</span>
        <span class="tech-badge">4G LTE IOT</span>
        <span class="tech-badge">Kicad PCB Design</span>
        <span class="tech-badge">AVR</span>
      </div>
    </div>
  </div>

  <!-- Back Button -->
  <div class="back-section">
    <a href="index.html" class="back-btn">‚Üê Back to Portfolio</a>
  </div>

  <!-- Lightbox Modal -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
    <span class="lightbox-close" onclick="closeLightbox(event)">&times;</span>
    <button class="lightbox-nav lightbox-prev" onclick="changeImage(-1, event)">&#10094;</button>
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="">
      <div class="lightbox-caption" id="lightbox-caption"></div>
    </div>
    <button class="lightbox-nav lightbox-next" onclick="changeImage(1, event)">&#10095;</button>
  </div>

  <!-- Video Modal -->
  <div class="video-modal" id="videoModal" onclick="closeVideoModal(event)">
    <div class="video-modal-content">
      <button class="video-modal-close" onclick="closeVideoModal(event)"></button>
      <iframe id="videoIframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      <div class="video-modal-title" id="videoTitle"></div>
    </div>
  </div>

  <footer>
    ¬© 2025 Joseph Thapa Magar. All Rights Reserved.
  </footer>

  <script>
    // Gallery data
    const galleryImages = [
      { src: 'TokenTap/FrontView Labelled.png', caption: 'PCB Front View' },
      { src: 'TokenTap/BackView.jpg', caption: 'PCB Back View' },
      { src: 'TokenTap/Complete Setup Labelled.png', caption: 'Complete Setup' },
      { src: 'TokenTap/PCB Front Back.jpg', caption: 'Front and Back of Two Layer PCB' },
      { src: 'TokenTap/Kicad 3d.JPG', caption: 'PCB designed in KiCad-Front View' },
      { src: 'TokenTap/2 layer PCB.JPG', caption: 'KiCad Two Layer PCB Design' },
      { src: 'TokenTap/TokenTap.JPG', caption: 'Token Tap' },
      { src: 'TokenTap/Tokens.jpg', caption: 'Inserting Token' },
      { src: 'TokenTap/TokenTapMechanism.png', caption: 'Token Tap Mechanism' },
      { src: 'TokenTap/Python App.JPG', caption: 'Python Application to Communicate With Data Logger' },
      { src: 'TokenTap/Web Server.JPG', caption: 'Received Data from the Data Logger' }
    ];

    let currentIndex = 0;

    // Image Lightbox Functions
    function openLightbox(index) {
      currentIndex = index;
      updateLightboxImage();
      document.getElementById('lightbox').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox(event) {
      if (event.target.id === 'lightbox' || event.target.classList.contains('lightbox-close')) {
        document.getElementById('lightbox').classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    }

    function changeImage(direction, event) {
      event.stopPropagation();
      currentIndex += direction;
      
      if (currentIndex < 0) {
        currentIndex = galleryImages.length - 1;
      } else if (currentIndex >= galleryImages.length) {
        currentIndex = 0;
      }
      
      updateLightboxImage();
    }

    function updateLightboxImage() {
      const img = document.getElementById('lightbox-img');
      const caption = document.getElementById('lightbox-caption');
      
      img.src = galleryImages[currentIndex].src;
      caption.textContent = galleryImages[currentIndex].caption;
    }

    // Video Modal Functions
    function openVideoModal(videoUrl, title) {
      const modal = document.getElementById('videoModal');
      const iframe = document.getElementById('videoIframe');
      const titleEl = document.getElementById('videoTitle');
      
      iframe.src = videoUrl + '?autoplay=1';
      titleEl.textContent = title;
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeVideoModal(event) {
      if (event.target.id === 'videoModal' || event.target.classList.contains('video-modal-close')) {
        const modal = document.getElementById('videoModal');
        const iframe = document.getElementById('videoIframe');
        
        iframe.src = '';
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
      }
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      const lightbox = document.getElementById('lightbox');
      const videoModal = document.getElementById('videoModal');
      
      if (lightbox.classList.contains('active')) {
        if (e.key === 'Escape') {
          lightbox.classList.remove('active');
          document.body.style.overflow = 'auto';
        } else if (e.key === 'ArrowLeft') {
          changeImage(-1, e);
        } else if (e.key === 'ArrowRight') {
          changeImage(1, e);
        }
      }
      
      if (videoModal.classList.contains('active') && e.key === 'Escape') {
        closeVideoModal(e);
      }
    });
  </script>

</body>
</html>